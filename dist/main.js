(()=>{"use strict";function e(e){const t=e.target.parentNode.querySelector(".contadorInput");t.value&&t.value>0&&(t.value=parseInt(t.value)-1)}function t(e){const t=e.target.parentNode.querySelector(".contadorInput");t.value||(t.value=0),t.value>=0&&(t.value=parseInt(t.value)+1)}let n,a=null,c=[];document.querySelector("#agregaDocumentosColaBtn").addEventListener("click",(async function(){const e=document.querySelector(".colaContainer"),t=document.querySelector("#numeroDocumento"),o=document.querySelector('.docTypeOption input[type="radio"]:checked');if(t.value&&o){const s=await async function(e,t){try{return await async function(e){const t=await fetch(e);if(!t.ok)throw 404===t.status?(alert("Documento ingresado no existe"),new Error("Error en la peticion")):(alert("Error interno del servidor"),new Error("Error en la peticion"));return await t.json()}(`http://localhost:3000/documentos?documento=${e}&serie=${t}`)}catch(e){console.error("Error al obtener factura: ",e)}}(t.value,o.value);if(s)if(n="PED"===o.value||"CON"===o.value?`${s[0][1]}-${s[0][6]}`:`${s[0][0]}-${s[0][8]}`,a&&a!==n)alert("Cliente y/o Direccion del documento ingresado no coincide con el de la cola");else{if(!a){const t=function(e,t){const n=document.createElement("div");n.classList.add("colaHeader");const a=document.createElement("h2");a.classList.add("nombreCliente"),a.innerText="PED"===t||"CON"===t?e[2]:e[1];const c=document.createElement("h3");c.classList.add("domicilioEnvio"),c.classList.add("metaData"),c.innerText="PED"===t||"CON"===t?e[7]:e[9];const o=document.createElement("h3");return o.classList.add("ciudadMunicipio"),o.classList.add("metaData"),o.innerText="PED"===t||"CON"===t?`${e[8]}, ${e[9]}`:`${e[10]}, ${e[11]}`,n.appendChild(a),n.appendChild(c),n.appendChild(o),n}(s[0],o.value);e.appendChild(t),console.log(o.value),"PED"===o.value||"CON"===o.value?(c.push(s[0][2]),c.push(s[0][7]),c.push(s[0][8]),c.push(s[0][9])):(c.push(s[0][1]),c.push(s[0][9]),c.push(s[0][10]),c.push(s[0][11]));const n=function(){const e=document.createElement("ul");return e.classList.add("colaDocumentos"),e}();e.appendChild(n)}const l=document.querySelector(".colaDocumentos"),i=function(e,t){const n=document.createElement("li");n.classList.add("documentoEnCola"),n.id=`${e}/${t}`;const a=document.createElement("p");a.innerText=`${e}/${t}`;const c=document.createElement("span");return c.classList.add("deleteItemBtn"),c.setAttribute("onclick","deleteItemBtn(event)"),c.innerText="Eliminar",n.appendChild(a),n.appendChild(c),n}(o.value,t.value);l.appendChild(i),a=n}o.checked=!1,t.value="",t.focus()}})),document.querySelectorAll(".decreaseValue").forEach((t=>{t.addEventListener("click",e)})),document.querySelectorAll(".increaseValue").forEach((e=>{e.addEventListener("click",t)})),document.querySelector(".desdeHastaTitle").addEventListener("click",(()=>{document.querySelector("#desdeHasta").classList.toggle("disabled")})),document.querySelector(".generarEtiquetasBtn").addEventListener("click",(async function(){const e=document.querySelectorAll(".documentoEnCola"),t=document.querySelector(".mainContainer"),n=document.querySelector(".generarEtiquetasBtnContainer"),a=document.body;let o=[];e.forEach((e=>{o.push(e.id)})),t.classList.toggle("disabled"),n.classList.toggle("disabled");const s=function(e,t){console.log(e,t);const n=e.join(", ");return console.log(n),function(e,t){return`\n<div class="etiqueta">\n    <section class="etiqueta__header">\n        <div class="etiqueta__info">\n            <h2 class="etiqueta__info__cliente nombreCliente">${e[0]}</h2>\n            <p class="etiqueta__info__direccion metaData">${e[1]}</p>\n            <p class="etiqueta__info__ciudad metaData">${e[2]}, ${e[3]}</p>\n        </div>\n        <span class="etiqueta__logoDdb"></span>\n    </section>\n    <section class="etiqueta__data">\n        <h3>DOCUMENTOS:</h3>\n        <p>${t}</p>\n    </section>\n    <section class="etiqueta__cajas">\n        <h1 class="nevera-caja">Nevera</h1>\n        <p>\n            <span class="nevera-caja__desde">1</span> de \n            <span class="nevera-caja__hasta">5</span>\n        </p>\n    </section>\n</div>`}(t,e)}(o,c);console.log(s),a.innerHTML=s,window.print(),t.classList.toggle("disabled"),n.classList.toggle("disabled")}))})();