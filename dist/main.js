(()=>{"use strict";function e(e){const t=e.target.parentNode.querySelector(".contadorInput");t.value&&t.value>0&&(t.value=parseInt(t.value)-1)}function t(e){const t=e.target.parentNode.querySelector(".contadorInput");t.value||(t.value=0),t.value>=0&&(t.value=parseInt(t.value)+1)}function n(e,t,n,a,c){return`\n<div class="etiqueta">\n    <section class="etiqueta__header">\n        <div class="etiqueta__info">\n            <h2 class="etiqueta__info__cliente nombreCliente">${e[0]}</h2>\n            <p class="etiqueta__info__direccion metaData">${e[1]}</p>\n            <p class="etiqueta__info__ciudad metaData">${e[2]}, ${e[3]}</p>\n        </div>\n        <span class="etiqueta__logoDdb"></span>\n    </section>\n    <section class="etiqueta__data">\n        <h3>DOCUMENTOS:</h3>\n        <p>${t}</p>\n    </section>\n    <section class="etiqueta__cajas">\n        <h1 class="nevera-caja">${n}</h1>\n        <p>\n            <span class="nevera-caja__desde">${a}</span> de \n            <span class="nevera-caja__hasta">${c}</span>\n        </p>\n    </section>\n</div>`}let a,c=null,o=[];document.querySelector("#agregaDocumentosColaBtn").addEventListener("click",(async function(){const e=document.querySelector(".colaContainer"),t=document.querySelector("#numeroDocumento"),n=document.querySelector('.docTypeOption input[type="radio"]:checked');if(t.value&&n){const s=await async function(e,t){try{return await async function(e){const t=await fetch(e);if(!t.ok)throw 404===t.status?(alert("Documento ingresado no existe"),new Error("Error en la peticion")):(alert("Error interno del servidor"),new Error("Error en la peticion"));return await t.json()}(`http://192.168.1.46:3000/documentos?documento=${e}&serie=${t}`)}catch(e){console.error("Error al obtener factura: ",e)}}(t.value,n.value);if(s)if(a="PED"===n.value||"CON"===n.value?`${s[0][1]}-${s[0][6]}`:`${s[0][0]}-${s[0][8]}`,c&&c!==a)alert("Cliente y/o Direccion del documento ingresado no coincide con el de la cola");else{if(!c){const t=function(e,t){const n=document.createElement("div");n.classList.add("colaHeader");const a=document.createElement("h2");a.classList.add("nombreCliente"),a.innerText="PED"===t||"CON"===t?e[2]:e[1];const c=document.createElement("h3");c.classList.add("domicilioEnvio"),c.classList.add("metaData"),c.innerText="PED"===t||"CON"===t?e[7]:e[9];const o=document.createElement("h3");return o.classList.add("ciudadMunicipio"),o.classList.add("metaData"),o.innerText="PED"===t||"CON"===t?`${e[8]}, ${e[9]}`:`${e[10]}, ${e[11]}`,n.appendChild(a),n.appendChild(c),n.appendChild(o),n}(s[0],n.value);e.appendChild(t),"PED"===n.value||"CON"===n.value?(o.push(s[0][2]),o.push(s[0][7]),o.push(s[0][8]),o.push(s[0][9])):(o.push(s[0][1]),o.push(s[0][9]),o.push(s[0][10]),o.push(s[0][11]));const a=function(){const e=document.createElement("ul");return e.classList.add("colaDocumentos"),e}();e.appendChild(a)}const l=document.querySelector(".colaDocumentos"),r=function(e,t){const n=document.createElement("li");n.classList.add("documentoEnCola"),n.id=`${e}/${t}`;const a=document.createElement("p");a.innerText=`${e}/${t}`;const c=document.createElement("span");return c.classList.add("deleteItemBtn"),c.setAttribute("onclick","deleteItemBtn(event)"),c.innerText="Eliminar",n.appendChild(a),n.appendChild(c),n}(n.value,t.value);l.appendChild(r),c=a}n.checked=!1,t.value="",t.focus()}})),document.querySelectorAll(".decreaseValue").forEach((t=>{t.addEventListener("click",e)})),document.querySelectorAll(".increaseValue").forEach((e=>{e.addEventListener("click",t)})),document.querySelector(".desdeHastaTitle").addEventListener("click",(()=>{document.querySelector("#desdeHasta").classList.toggle("disabled")})),document.querySelector(".generarEtiquetasBtn").addEventListener("click",(async function(){const e=document.querySelectorAll(".documentoEnCola"),t=document.querySelector(".mainContainer"),a=document.querySelector(".generarEtiquetasBtnContainer"),c=document.querySelector(".etiquetasContainer"),s=document.querySelector("#cantNeveras"),l=document.querySelector("#cantCajas");if(document.body,0!=s.value||0!=l.value){let r=[];e.forEach((e=>{r.push(e.id)})),t.classList.toggle("disabled"),a.classList.toggle("disabled");let i=s.value||0,u=l.value||0;const d=function(e,t,a,c){const o=document.createElement("div"),s=e.join(", ");let l,r=parseInt(a)+parseInt(c),i=1;for(let e=1;e<=a;e++){l="Nevera";const e=n(t,s,l,i,r);o.innerHTML+=e,i+=1}for(let e=1;e<=c;e++){l="Caja";const e=n(t,s,l,i,r);o.innerHTML+=e,i+=1}return o}(r,o,i,u);c.appendChild(d),setTimeout((function(){window.print(),c.innerHTML="",s.value="",l.value="",t.classList.toggle("disabled"),a.classList.toggle("disabled")}),500)}else alert("Debe seleccionar cantidad de neveras/cajas")}))})();